cd src
echo building...

echo building doc

cd doc
python3 build.py
cd ..

echo building program

if hash ~/.cargo/bin/cargo 2> /dev/null;
then
	~/.cargo/bin/cargo build --release
else
	echo "Cargo (and so Rust) is not installed. Attempting to install rust..."
	
	curl https://sh.rustup.rs -sSf | sh
	
	echo "Rust installed. Now building..."

	~/.cargo/bin/cargo build --release
fi

mkdir -p build

cp ./target/release/libpf_addcomb.so ./build/_addcomb.so
